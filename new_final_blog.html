<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Ignite Afterschool Project</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="new_final_blog_files/libs/clipboard/clipboard.min.js"></script>
<script src="new_final_blog_files/libs/quarto-html/quarto.js"></script>
<script src="new_final_blog_files/libs/quarto-html/popper.min.js"></script>
<script src="new_final_blog_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="new_final_blog_files/libs/quarto-html/anchor.min.js"></script>
<link href="new_final_blog_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="new_final_blog_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="new_final_blog_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="new_final_blog_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="new_final_blog_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Ignite Afterschool Project</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="project-background" class="level2">
<h2 class="anchored" data-anchor-id="project-background">Project Background</h2>
<p>For our project, we have partnered with Ignite Afterschool, an education and advocacy non-profit based in the Twin Cities, to update data briefs that they create for parents and the general public. We have utilized the Minnesota Student Survey to provide answers about after school engagement and outcomes across Minnesota which included analysis of disparities based on race, income, and region.</p>
<p>Our objectives for this project were:</p>
<ol type="1">
<li><p>What information is available in the MSS (Minnesota Student Survey) and how can we use it to update the existing briefs?</p></li>
<li><p>What other information may be helpful to ignite afterschool’s data briefs and how should we present our findings to them?</p></li>
<li><p>What questions on the survey relate to the recent legalization of cannabis in Minnesota? Are there other sources we could draw from to supplement the MSS?</p></li>
</ol>
<p>Our questions were largely determined based on Ignite’s needs which were to update the existing briefs using the 2022 survey and have an understanding of what data was available including any information that may be relevant to the recent legalization of cannabis in Minnesota. We first identified variables of interest including race, variables related to being connected to a caring adult, engaging in after school activities 3 times a week, resource related variables, and region. We then found the variables related to drug and alcohol use and presented the available questions to Ignite.</p>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="images/data_brief.png" class="img-fluid figure-img" width="456"></p>
<figcaption class="figure-caption">Example Data Brief</figcaption>
</figure>
</div>
</section>
<section id="data-context" class="level2">
<h2 class="anchored" data-anchor-id="data-context">Data Context</h2>
<p>Our main data source for this project was the Minnesota Student Survey from 2022. According to the Minnesota Department of Education, the Minnesota Student Survey is one of the longest-running youth surveys in the United States. It is an anonymous statewide survey that is given to grades five, eight, nine, and eleven to gain insight into student experiences. For this project, we will be using the survey collected online by the state of Minnesota in collaboration with local schools in 2022.&nbsp;</p>
<p>The survey is taken every three years with changes made between each one such as wording or new questions. In every administration of the survey at least 81% of schools in Minnesota have participated, in 2022 there were approximately 135,000 individual responses (observations).&nbsp;</p>
<p>According to the Minnesota Department of Education the results of the survey are posted publicly and used by non-state groups to assess student needs and hold public discussions. The state uses the data “to monitor trends, to assess the extent of disparities among population groups, to obtain federal and state funding, and to assist local communities and schools.” According the the Wilder Foundation, an organization that assisted the State in administrating the survey explains that the survey asks about “students’ feelings and experiences related to health and wellbeing, supportive and caring relationships, safety, and engagement in school and activities. It provides students with the opportunity to tell us how they are doing, and what they need to thrive.”</p>
<p>It is important to consider that the survey is administered in school setting to students. Teachers and other staff provide the material and instruct students to complete the survey. Ultimately the survey requires student consent, but there is a still an underlying pressure to participate. Many factors by influence the data including reading level, English proficiency, trust in school and government, boredom, and many other important social contexts. For our project, students not answering questions poses the greatest challenge in interpreting results. As previously mentioned, students may not answer questions for a variety of reasons, and we should consider that an important part of the context when evaluating and representing the results of our analysis.</p>
<p><a href="https://education.mn.gov/MDE/dse/health/mss/mde059027" class="uri">https://education.mn.gov/MDE/dse/health/mss/mde059027</a>&nbsp;</p>
<p><a href="https://www.wilder.org/wilder-research/research-library/2022-minnesota-student-survey" class="uri">https://www.wilder.org/wilder-research/research-library/2022-minnesota-student-survey</a></p>
</section>
<section id="analysis" class="level2">
<h2 class="anchored" data-anchor-id="analysis">Analysis</h2>
<p>The first steps we had to take involved parsing through the large data dictionary and using two different csv files, one that included included county data but not race, and one that included race but no county data. We then group the observations by regions so that Ignite would be able to create regional briefs similar to the ones they have previously published. Below is a table that displays the regions:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 4
  Region       region_perc region_count    sum
  &lt;chr&gt;              &lt;dbl&gt;        &lt;dbl&gt;  &lt;dbl&gt;
1 Central            14.8         19984 135447
2 Northland           5.02         6804 135447
3 Northwest           2.91         3946 135447
4 Southern           15.0         20368 135447
5 Southwest           4.73         6402 135447
6 Twin Cities        53.1         71899 135447
7 West Central        4.46         6044 135447</code></pre>
</div>
</div>
<p>Our project involved quite a bit of wrangling, as the questions Ignite wanted to answer in the briefs were not directly asked in the survey. For example, to determine if a student was engaged 3 or more times a week, we had to create a new variable that took into account a variety of engagement types. For our investigation of income we used the answers to questions about having enough food and stable shelter to determine if a student was low income or not. This process involved us communicating with Ignite to make these choices. but some assumptions were our own which we documented in the brief construction process.</p>
<section id="engaged-after-school" class="level3">
<h3 class="anchored" data-anchor-id="engaged-after-school">Engaged After school</h3>
<p>We calculated if students did at least one of the following activities at least 3 times a week:</p>
<ol type="1">
<li>stay at my school or go to another school</li>
<li>My home or another home such as a friend’s, relative’s or neighbor’s</li>
<li>A rec, community or other youth center</li>
<li>A park or other outdoor space</li>
<li>A library</li>
<li>A church, synagogue, mosque, or other spiritual/religious place &nbsp;</li>
</ol>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 5
  Region       percent_true percent_false percent_unknown total
  &lt;chr&gt;               &lt;dbl&gt;         &lt;dbl&gt;           &lt;dbl&gt; &lt;dbl&gt;
1 Central              76.2          23.8               0 19984
2 Northland            75.5          24.5               0  6804
3 Northwest            74.2          25.8               0  3946
4 Southern             75.2          24.8               0 20368
5 Southwest            72.9          27.1               0  6402
6 Twin Cities          73.6          26.4               0 71899
7 West Central         76.2          23.8               0  6044</code></pre>
</div>
</div>
<section id="by-race" class="level4">
<h4 class="anchored" data-anchor-id="by-race">By Race</h4>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  Region                 white hmong american_indian
  &lt;chr&gt;                  &lt;dbl&gt; &lt;dbl&gt;           &lt;dbl&gt;
1 Twin Cities Metro Area  78.0  66.5            70.1
2 Greater Minnesota       77.7  64.7            69.0</code></pre>
</div>
</div>
</section>
</section>
<section id="caring-adults" class="level3">
<h3 class="anchored" data-anchor-id="caring-adults">Caring Adults</h3>
<p>Answer of “quite a bit” or “very much” to if either teachers or another staff member at the school care about the student.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 6
  Region  percent_true percent_false percent_unknown total PctIncreaseInDontCare
  &lt;chr&gt;          &lt;dbl&gt;         &lt;dbl&gt;           &lt;dbl&gt; &lt;dbl&gt;                 &lt;dbl&gt;
1 Central         46.7          45.0            8.33 19984                     3
2 Northl…         44.4          46.1            9.45  6804                     3
3 Northw…         47.8          43.7            8.46  3946                     2
4 Southe…         46.7          43.8            9.49 20368                    13
5 Southw…         48.9          42.1            9.03  6402                     3
6 Twin C…         49.7          38.2           12.2  71899                    -1
7 West C…         49.0          42.9            8.17  6044                     5</code></pre>
</div>
</div>
</section>
<section id="income" class="level3">
<h3 class="anchored" data-anchor-id="income">Income</h3>
<p>Skipping meals and experiencing homelessness were used as a proxy for being low income. We also attempted to use resources like access to a laptop or tablet as a proxy, but found a similar study used these variables instead. Ensuring that this was the same way Ignite previously calculated low vs.&nbsp;high income is unfortunately outside of the scope of this project.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 8
  Region    total high_income_true high_income_false high_income_na percent_true
  &lt;chr&gt;     &lt;dbl&gt;            &lt;dbl&gt;             &lt;dbl&gt;          &lt;dbl&gt;        &lt;dbl&gt;
1 Central   19984            18105               334           1545         90.6
2 Northland  6804             6038               135            631         88.7
3 Northwest  3946             3533                90            323         89.5
4 Southern  20368            18188               336           1844         89.3
5 Southwest  6402             5697               116            589         89.0
6 Twin Cit… 71899            62893              1034           7972         87.5
7 West Cen…  6044             5494                89            461         90.9
# ℹ 2 more variables: percent_false &lt;dbl&gt;, percent_unknown &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="the-cannabis-report" class="level3">
<h3 class="anchored" data-anchor-id="the-cannabis-report">The Cannabis Report</h3>
<p>In MSS we identified the following key questions in line with Ignite’s goals for expanding their cannabis education programming:</p>
<ol type="1">
<li><strong>Any alcohol and/or other drug</strong> used during the past year</li>
<li><em>During the last 12 months, <strong>have you used marijuana</strong> (pot, weed) or hashish (hash, hash oil) (</em></li>
<li><em>During the last 12 months on <strong>how many occasions</strong> (if any) have you used marijuana or hashish? (Do not count medical marijuana prescribed for you by a doctor)</em></li>
<li>During the last 12 months, on how many occasions (if any) have you used <strong>synthetic marijuana</strong> that you took <strong>only to get high</strong></li>
<li><em>How much do you think people <strong>risk harming themselves</strong> physically or in other ways if they <strong>use marijuana once or twice per week</strong></em></li>
</ol>
<p>We prioritized answering questions 3 and 5 per Ignite’s request and found that for question 3 there was very little variance in frequency of use across race and region as almost all students selected 0 times or did not answer.</p>
</section>
<section id="question-3" class="level3">
<h3 class="anchored" data-anchor-id="question-3">Question 3</h3>
<section id="during-the-last-12-months-on-how-many-occasions-if-any-have-you-used-marijuana-or-hashish-do-not-count-medical-marijuana-prescribed-for-you-by-a-doctor" class="level5">
<h5 class="anchored" data-anchor-id="during-the-last-12-months-on-how-many-occasions-if-any-have-you-used-marijuana-or-hashish-do-not-count-medical-marijuana-prescribed-for-you-by-a-doctor"><em>During the last 12 months on <strong>how many occasions</strong> (if any) have you used marijuana or hashish? (Do not count medical marijuana prescribed for you by a doctor)</em></h5>
<div class="cell">
<div class="cell-output-display">
<p><img src="new_final_blog_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="864"></p>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="new_final_blog_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="864"></p>
</div>
</div>
</section>
</section>
<section id="question-5" class="level3">
<h3 class="anchored" data-anchor-id="question-5">Question 5</h3>
<section id="how-much-do-you-think-people-risk-harming-themselves-physically-or-in-other-ways-if-they-use-marijuana-once-or-twice-per-week" class="level5">
<h5 class="anchored" data-anchor-id="how-much-do-you-think-people-risk-harming-themselves-physically-or-in-other-ways-if-they-use-marijuana-once-or-twice-per-week"><em>How much do you think people <strong>risk harming themselves</strong> physically or in other ways if they <strong>use marijuana once or twice per week</strong></em></h5>
<p>For question 5 we found that there is a larger amount of girls (37%) than boys (33%) who consider others using marijuana two or more times a week a “Great” risk to their health.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="new_final_blog_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>For results based on race we see 3 main categories.</p>
</section>
<section id="highest-perception-of-risk" class="level4">
<h4 class="anchored" data-anchor-id="highest-perception-of-risk">Highest Perception of risk:</h4>
<p>White only, Asian or Asian American only and multiple races all had a greater amount of students who considered others using marijuana two or more times a week a “Great” risk to their health ranging.</p>
</section>
<section id="lowest-perception-of-risk-or-not-applicable" class="level4">
<h4 class="anchored" data-anchor-id="lowest-perception-of-risk-or-not-applicable">Lowest Perception of risk or not applicable:</h4>
<p>American Indian or Alaskan Native and Native Hawaiian or Other Pacific Islanders in comparison had much lower amounts of students responding “Great” risk with more students giving no answer. It is important to note that these two racial groups are the smallest out of all respondents.</p>
</section>
<section id="moderate-perception-of-risk" class="level4">
<h4 class="anchored" data-anchor-id="moderate-perception-of-risk">Moderate Perception of risk:</h4>
<p>Black, African or African American only, Hispanic or Latino/a only, and Middle Eastern or North African respondents were some where between the previous groups with lower levels of no answer, but also lower levels of “Great” responses.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="new_final_blog_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="new_final_blog_files/figure-html/unnamed-chunk-9-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="new_final_blog_files/figure-html/unnamed-chunk-9-3.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="new_final_blog_files/figure-html/unnamed-chunk-9-4.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Students who did not answer the race question, also tended to not answer the 5th cannabis question.</p>
</section>
</section>
</section>
<section id="ethical-considerations" class="level2">
<h2 class="anchored" data-anchor-id="ethical-considerations">Ethical Considerations</h2>
<p>While we did find some difference in opinions of the risk of cannabis by race and sex, we find that difference mainly comes from students not answering the question. Students may feel uncomfortable disclosing about cannabis because they were advised not to, cultural beliefs, or maybe they don’t have an opinion on the question. It is possible that this data could be used to focus cannabis education programs or as part of a larger explanation as to how groups respond to survey questions and have been socialized to perceive risk. However, from an ethical perspective we believe that further evidence is required to draw any conclusions and our analysis should only be used as a starting point. It is also crucial to consider how the results of our data may be misinterpreted or used to uphold racial stereotypes. The purpose of the survey is to collect information on how students think and feel, so the use of data should also serve the purpose of improving programming and education for students.</p>
<p>Many non-profits like Ignite take an act role in closing the gaps that students face in education whether that be access to after school programming, or other disparities within Minnesota schools. Any policy and advocacy focused group should be fully informed as to how the data was collected, analyzed, and interpreted. This blog post serves to explain the findings of our project in an accessible manner. It is also an important consideration that we as students can make mistakes and because of this it is important to double check our findings before they may be published for public use like in a data brief.</p>
</section>
<section id="main-takeaways-and-future-directions" class="level2">
<h2 class="anchored" data-anchor-id="main-takeaways-and-future-directions">Main Takeaways and Future Directions</h2>
<p>This project is important for understanding youth behaviors, opinions, and their involvement with after school activities. New developments reflected in this survey are the COVID-19 pandemic and the legalization of cannabis in Minnesota. Our analysis updates the already known disparities in after school participation across race and class. Additionally, we find that cannabis usage amongst youth does not vary significantly by race or region, but we did find that youth opinions on the risk of cannabis use does vary slightly by sex, with girls viewing usage as a greater risk than boys. We also see that across racial groups there is quite a bit of variation with some groups answering that there is a “Great” risk but ultimately the groups that did not rate the risk as high, simply did not answer the question instead of selection one of the other risk options.</p>
<p>Our project addressed key areas of the current Ignite Afterschool data briefs, but with the constraints of our project we were not able to reproduce all of the data required. In order to complete the briefs one would have to clarify and correct if necessary the assumptions made in the wrangling and calculation process. Additionally future directions for this project could include a more in depth look at the cannabis questions and attempt to make comparisons with other states to provide more information to how legalization may affect students as this survey was taken in 2022 before the legalization of cannabis in Minnesota.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>